import{s as V,m as k,T as z,h as D,x as G,c as a,a as M,u as r,b as t,d as m,t as e,k as d,e as u,F as h,r as x,j as O,g as j,o,Z as q,n as I,I as P,w as U,v as T,O as $}from"./app-13978987.js";import{_ as A}from"./BlankLayout-f1c982d8.js";import"./SeoMeta-91cb18dc.js";import"./ToastrContainer-82d03ccc.js";const F={class:"payment-container"},Y={class:"payment-content"},E={class:"payment-header"},H={alt:"logo"},Z={class:"status"},J=t("i",{class:"fas fa-sad-tear"},null,-1),K=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",width:"28",height:"28"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Q=[K],R=t("i",{class:"fas fa-sad-tear"},null,-1),W=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",width:"28",height:"28"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),X=[W],tt={class:"gateways"},et=["onClick"],nt=t("svg",{class:"active-gateway",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})],-1),st=[nt],lt=["src"],at=["id"],ot=["onSubmit"],it={class:"payment-table"},rt={class:"text-center"},dt={key:0},ct={class:"text-center"},ut={key:1},mt={class:"text-center"},ht={class:"text-center"},pt={class:"payment-label text-secondary-700"},_t={class:"text-secondary-700"},yt={key:1},vt={class:"payment-label text-secondary-700"},bt={class:"payment-file-input"},ft={class:"payment-label text-secondary-700"},gt={class:"payment-label text-secondary-700"},kt=["disabled"],wt=t("br",null,null,-1),Ct={class:"payment-invoice"},Mt={class:"payment-border"},xt=t("br",null,null,-1),Pt=t("br",null,null,-1),Tt={class:"payment-border"},St=t("br",null,null,-1),Bt=t("br",null,null,-1),Lt=t("br",null,null,-1),Nt={class:"payment-details"},Vt={class:"payment-table"},zt={class:"text-center"},Dt={class:"text-center"},Gt={class:"text-center"},Ot={class:"text-center"},jt={class:"text-center"},qt=j({layout:A}),Ft=Object.assign(qt,{__name:"Payment",props:["plan","gateways","tax","total","invoice_data","error","minMax","user","logo","minMaxMessage"],setup(l){var C;const{formatCurrency:p,authUser:S}=V(),b=l,_=k(((C=b.gateways[0])==null?void 0:C.id)||0),f=k(null),y=k({image:null,comment:""}),v=z({phone:S.value.phone}),B=n=>{const i=b.gateways.find(g=>g.id===n);$.post(route("user.subscription.subscribe"),{gateway_id:n,plan_id:b.plan.id,manualPayment:i.is_auto==0?y.value:null,phone:v.phone})},L=n=>{_.value=n},w=()=>{f.value.style="display: none;"};return(n,i)=>{const g=D("Link"),N=G("lazy");return o(),a(h,null,[M(r(q),{title:n.trans("Payment")},null,8,["title"]),t("div",F,[t("div",Y,[t("div",E,[m(t("img",H,null,512),[[N,n.$page.props.primaryData.deep_logo]]),t("span",Z,e(n.trans("Unpaid")),1)]),l.error?(o(),a("div",{key:0,ref_key:"alertContainer",ref:f,class:"payment-error-alert"},[t("div",null,[J,t("strong",null,e(n.trans("!Opps ")),1),d(" "+e(n.trans("Transaction failed if you make payment successfully please contact us.")),1)]),t("button",{type:"button",onClick:w},Q)],512)):u("",!0),l.minMax?(o(),a("div",{key:1,ref_key:"alertContainer",ref:f,class:"payment-error-alert"},[t("div",null,[R,t("strong",null,e(n.trans("!Opps ")),1),d(" "+e(l.minMaxMessage),1)]),t("button",{type:"button",onClick:w},X)],512)):u("",!0),t("div",tt,[(o(!0),a(h,null,x(l.gateways,s=>(o(),a("button",{key:s.id,onClick:c=>L(s.id),class:I({"payment-border":_.value==s.id})},[m(t("div",null,st,512),[[P,_.value==s.id]]),t("img",{src:s.logo},null,8,lt)],10,et))),128))]),(o(!0),a(h,null,x(l.gateways,s=>m((o(),a("div",{key:s.id,class:"gateway-form",id:"gateway-form"+s.id},[t("form",{method:"post",onSubmit:U(c=>B(s.id),["prevent"]),enctype:"multipart/form-data"},[t("table",it,[t("tr",null,[t("td",null,e(n.trans("Method Name: ")),1),t("td",rt,e(s.name),1)]),s.currency!=null?(o(),a("tr",dt,[t("td",null,e(n.trans("Gateway Currency: ")),1),t("td",ct,e(s.currency),1)])):u("",!0),s.charge!=0?(o(),a("tr",ut,[t("td",null,e(n.trans("Gateway Charge: ")),1),t("td",mt,e(r(p)(s.charge)),1)])):u("",!0),t("tr",null,[t("td",null,e(n.trans("Payable Amount: ")),1),t("td",ht,e(r(p)(l.total*s.multiply+s.charge)),1)])]),s.comment!=null?(o(),a(h,{key:0},[t("p",pt,[t("b",null,e(n.trans("Payment Instruction: ")),1)]),t("p",_t,e(s.comment),1)],64)):u("",!0),s.phone_required==1?(o(),a("div",yt,[t("label",vt,[t("b",null,e(n.trans("Your phone number")),1)]),m(t("input",{type:"number",name:"phone",placeholder:"Your phone number",class:"payment-input",required:"","onUpdate:modelValue":i[0]||(i[0]=c=>r(v).phone=c)},null,512),[[T,r(v).phone]])])):u("",!0),s.is_auto==0?(o(),a(h,{key:2},[t("div",bt,[t("label",ft,[t("b",null,e(n.trans("Submit your payment proof")),1)]),t("input",{onInput:i[1]||(i[1]=c=>{y.value.image=c.target.files[0]}),type:"file",name:"image",required:"",accept:"image/*"},null,32)]),t("div",null,[t("label",gt,[t("b",null,e(n.trans("Comment")),1)]),m(t("textarea",{class:"payment-textarea","onUpdate:modelValue":i[2]||(i[2]=c=>y.value.comment=c),required:"",name:"comment",placeholder:"comment",maxlength:"500"},null,512),[[T,y.value.comment]])])],64)):u("",!0),t("button",{disabled:r(v).processing,type:"submit",class:"btn btn-success mt-5 w-full"},e(n.trans("Pay Now")),9,kt)],40,ot)],8,at)),[[P,_.value===s.id]])),128)),wt,t("div",Ct,[t("div",Mt,[t("b",null,e(n.trans("Invoiced To")),1),xt,d(" "+e(l.user.name),1),Pt,d(" "+e(l.user.address),1)]),t("div",Tt,[t("b",null,e(n.trans("Pay To")),1),St,d(" "+e(l.invoice_data.company_name)+" ",1),Bt,d(" "+e(l.invoice_data.address)+", "+e(l.invoice_data.city)+" ",1),Lt,d(" "+e(l.invoice_data.post_code)+", "+e(l.invoice_data.country),1)])]),t("div",Nt,[t("table",Vt,[t("tr",zt,[t("td",null,[t("b",null,e(n.trans("Description")),1)]),t("td",null,[t("b",null,e(n.trans("Amount")),1)])]),t("tr",null,[t("td",null,e(l.plan.title),1),t("td",Dt,e(l.plan.price_format),1)]),t("tr",null,[t("td",null,e(n.trans("Sub Total"))+":",1),t("td",Gt,e(l.plan.price_format),1)]),t("tr",null,[t("td",null,e(n.trans("Tax"))+":",1),t("td",Ot,e(r(p)(l.tax)),1)]),t("tr",null,[t("td",null,e(n.trans("Total"))+" :",1),t("td",jt,e(r(p)(l.total)),1)])])]),M(g,{href:"/user/subscription",class:"payment-cancel-btn"},{default:O(()=>[d(e(n.trans("Cancel Payment")),1)]),_:1})])])],64)}}});export{Ft as default};
