import{s as j,a1 as A,T as D,a5 as k,q as b,l as Y,c,a as f,b as s,w as z,t as p,u as t,i as h,e as n,F as w,r as R,d as _,v as y,k as H,g as G,o as r}from"./app-13978987.js";import{_ as W}from"./PageHeader-8c638686.js";import{_ as J}from"./SpinnerBtn-cb152833.js";import{_ as K}from"./UserLayout-6a50516d.js";import{s as x}from"./multiselect-4ccf8c7b.js";import{_ as g}from"./InputFieldError-52549d23.js";import{_ as Q}from"./NoDataFound-bc81d7fa.js";import{_ as X}from"./RichEditor-132d6d13.js";import"./dropdown-45d66330.js";import"./FloatingDropdown-0be3e47c.js";const{pickBy:I}=j(),Z=A("aiToolsStore",{state:()=>({props:{},generatedText:"",generatedVideo:"",generateVideoId:null,generatedVoice:"",generateVoiceId:null,generatedImages:[],documentName:"",fieldErrors:{},errors:{},hasError:!1,isProcessing:!1,form:D({prompt:"",language:"english",tone:"",max_token:200,qty:1,creativity:"",seconds:0,init_audio:null,model:"",template_id:"",fields:""}),tones:["Professional","Funny","Casual","Excited","Bold","Dramatic"],creativityLevels:[{label:"Optimal",value:.5},{label:"Low",value:.8},{label:"Medium",value:.9},{label:"High",value:1}]}),actions:{setInitialState(o){this.form=o},transformPrompt(){const o=[];this.form.fields.forEach(l=>{if(l.hasOwnProperty("value"))o[l.name.toLowerCase()]=l.value,this.hasError=!1;else{this.hasError=!0,this.fieldErrors[l.name]=`${l.name} is required`;return}}),this.form.prompt=this.props.template.prompt.replace(/\[(.*?)\]/g,(l,u)=>o[u.toLowerCase()])},generateText(){k.post(route("api-ai-generate-text",I(this.form))).then(async o=>{for(const l of o.data)this.generatedText+=l,await new Promise(u=>setTimeout(u,100))}).catch(o=>{this.errors=o.response.data.errors,o.response.status==400&&b.danger("You dont have enough credits please purchase some credits")}).finally(()=>{this.isProcessing=!1,this.fieldErrors={}})},async processMedia(o,l,u=!1,d){const e=await k.post(o,I(this.form));e.data.status=="processing"&&(u&&(d==="video"?this.generateVideoId=e.data.id:(d==="voice"||d==="audio")&&(this.generateVoiceId=e.data.id)),await new Promise(m=>setTimeout(m,l)),d==="video"?this.fetchVideo():(d==="voice"||d==="audio")&&this.fetchVoice()),e.data.status=="success"&&(d==="video"?(this.generatedVideo=e.data.output[0],this.generateVideoId=null):(d==="voice"||d==="audio")&&(this.generatedVoice=e.data.output[0],this.generateVoiceId=null),this.isProcessing=!1,this.fieldErrors={}),e.data.status=="failed"&&(d==="video"?(this.generatedVideo=[],this.generateVideoId=null):(d==="voice"||d==="audio")&&(this.generatedVoice=[],this.generateVoiceId=null),this.isProcessing=!1,this.fieldErrors={}),e.data.error&&b.danger(e.data.error)},fetchVideo(){this.processMedia(route("api-ai-fetch-generate-video",{id:this.generateVideoId}),3e4,!1,"video")},generateVideo(){this.processMedia(route("api-ai-generate-video"),3e4,!0,"video")},fetchVoice(){this.processMedia(route("api-ai-fetch-generate-voice",{id:this.generateVoiceId}),3e4,!1,"voice")},generateVoice(){this.processMedia(route("api-ai-generate-voice"),3e4,!0,"voice")},generateAudio(){this.processMedia(route("api-ai-generate-audio"),3e4,!0,"audio")},generateImage(){k.post(route("api-ai-generate-image",I(this.form))).then(async o=>{for(const l of o.data)this.generatedImages.push(l)}).catch(o=>{var l,u,d;this.errors=(u=(l=o.response)==null?void 0:l.data)==null?void 0:u.errors,((d=o.response)==null?void 0:d.status)==400&&b.danger("You dont have enough credits please purchase some credits")}).finally(()=>{this.isProcessing=!1,this.fieldErrors={}})},submit(){if(this.props.template.credit_charge*this.form.qty>this.props.credits){b.danger("You dont have enough credits please purchase some credits");return}if(this.transformPrompt(),!this.hasError){if(this.isProcessing=!0,this.props.template.prompt_type==="text"){this.generateText();return}if(this.props.template.prompt_type==="image"){this.generateImage();return}if(this.props.template.prompt_type==="video"){this.generateVideo();return}if(this.props.template.prompt_type==="voice_clone"){this.generateVoice();return}if(this.props.template.prompt_type==="audio"){this.generateAudio();return}}},downloadHTMLFile(o,l){const u=new Blob([o],{type:"text/html"}),d=document.createElement("a");d.href=URL.createObjectURL(u),d.download=l?l.replace(" ","-"):"untitled.html",d.click(),URL.revokeObjectURL(d.href)}}}),ee={class:"container flex-grow p-4 sm:p-6"},te={class:"grid grid-cols-1 place-items-start gap-5 lg:grid-cols-12"},se={class:"flex items-center justify-between"},oe={class:"flex items-center"},ae=["src"],re={class:"mx-2 text-sm"},ie={class:"capitalize text-gray-500"},le={key:0,class:"grid grid-cols-2 gap-3"},ne={class:"label mb-1"},de={class:"label mb-1"},ce={key:1},ue={class:"label"},me={class:"label mb-1"},pe=["onUpdate:modelValue","placeholder"],he=["onUpdate:modelValue","placeholder"],ge={key:2},fe={class:"label"},ve={class:"flex items-center gap-5"},_e={key:0,class:"flex-1"},ye={class:"label mb-1"},be={key:1,class:"flex-1"},xe={class:"label mb-1"},Ve={key:2,class:"flex-1"},ke={class:"label mb-1"},we={class:"card col-span-1 flex flex-col p-3 lg:col-span-7"},Ie={class:"user-activity-chart h-100 rounded p-4"},Le={key:0,class:"flex"},Ee=s("i",{class:"bx bx-clipboard text-2xl"},null,-1),Ue=[Ee],Ce=s("i",{class:"bx bx-download text-2xl"},null,-1),Me=[Ce],Pe={class:"my-8"},qe={key:2,class:"mt-6 grid grid-cols-3 gap-4 overflow-y-auto"},Ne=["href"],Te=s("i",{class:"bx bx-download text-2xl"},null,-1),$e=[Te],Se=["src"],Be={key:3,class:"relative grid grid-cols-1 gap-4"},Oe={class:"group overflow-hidden rounded-lg border border-primary-500 shadow shadow-primary-500"},Fe=["href"],Re=s("i",{class:"bx bx-download text-4xl"},null,-1),je=[Re],Ae={class:"h-full w-full",controls:""},De=["src"],Ye={key:4,class:"relative grid grid-cols-1 gap-4"},ze={class:"group overflow-hidden rounded-lg shadow-primary-500"},He=["href"],Ge=s("i",{class:"bx bx-download text-4xl"},null,-1),We=[Ge],Je={controls:"",class:"mt-12 w-full"},Ke=["src"],Qe=["src"],Xe=G({layout:K}),dt=Object.assign(Xe,{__name:"Show",props:["template","languages","credits"],setup(o){const l=o,{copyToClipboard:u,trim:d}=j(),e=Z();return Y(()=>{e.$patch({props:l,form:{model:l.template.ai_model,template_id:l.template.id,fields:l.template.fields}})}),(m,i)=>{var L,E,U,C,M,P,q,N,T,$,S,B,O,F;return r(),c("main",ee,[f(W,{title:"AI Tools"}),s("div",te,[s("form",{onSubmit:i[7]||(i[7]=z((...a)=>t(e).submit&&t(e).submit(...a),["prevent"])),class:"card card-body col-span-1 space-y-6 lg:col-span-5"},[s("div",se,[s("div",oe,[s("img",{src:o.template.icon,width:"50",height:"50",class:"rounded-full",alt:"icon"},null,8,ae),s("p",re,p(o.template.title),1)]),s("p",ie,p(t(d)(o.template.prompt_type)),1)]),o.template.prompt_type==="text"?(r(),c("div",le,[s("div",null,[s("label",ne,p(m.trans("Language"))+"*",1),f(t(x),{class:"multiselect-dark",modelValue:t(e).form.language,"onUpdate:modelValue":i[0]||(i[0]=a=>t(e).form.language=a),options:o.languages,valueProp:"name",label:"name",placeholder:"Language"},null,8,["modelValue","options"]),(L=t(e).errors)!=null&&L.language?(r(),h(g,{key:0,message:(E=t(e).errors)==null?void 0:E.language[0]},null,8,["message"])):n("",!0)]),s("div",null,[s("label",de,p(m.trans("Tone"))+"*",1),f(t(x),{class:"multiselect-dark",modelValue:t(e).form.tone,"onUpdate:modelValue":i[1]||(i[1]=a=>t(e).form.tone=a),options:t(e).tones,placeholder:"Tone"},null,8,["modelValue","options"]),(U=t(e).errors)!=null&&U.tone?(r(),h(g,{key:0,message:(C=t(e).errors)==null?void 0:C.tone[0]},null,8,["message"])):n("",!0)])])):n("",!0),o.template.prompt_type==="audio"?(r(),c("div",ce,[s("label",ue,p(m.trans("Valid Audio File"))+"*",1),s("input",{accept:"audio/*",onChange:i[2]||(i[2]=a=>t(e).form.init_audio=a.target.files[0]),required:"",type:"file",class:"input"},null,32),(M=t(e).errors)!=null&&M.init_audio?(r(),h(g,{key:0,message:(P=t(e).errors)==null?void 0:P.init_audio[0]},null,8,["message"])):n("",!0)])):n("",!0),s("div",null,[(r(!0),c(w,null,R(t(e).form.fields,(a,v)=>(r(),c("div",{key:v},[s("label",me,p(a.name)+"*",1),a.type==="input"?_((r(),c("input",{key:0,required:"","onUpdate:modelValue":V=>a.value=V,type:"text",class:"input",placeholder:a.placeholder},null,8,pe)),[[y,a.value]]):n("",!0),a.type==="textarea"?_((r(),c("textarea",{key:1,required:"","onUpdate:modelValue":V=>a.value=V,class:"textarea",placeholder:a.placeholder},null,8,he)),[[y,a.value]]):n("",!0),t(e).hasError?(r(),h(g,{key:2,message:t(e).fieldErrors[a.name]},null,8,["message"])):n("",!0),!t(e).hasError&&t(e).errors&&t(e).errors["fields."+v+".value"]?(r(),h(g,{key:3,message:t(e).errors["fields."+v+".value"][0]},null,8,["message"])):n("",!0)]))),128))]),o.template.prompt_type==="text"?(r(),c("div",ge,[s("label",fe,p(m.trans("Maximum Word Limit")),1),_(s("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>t(e).form.max_token=a),type:"text",class:"input",placeholder:"Maximum Length"},null,512),[[y,t(e).form.max_token,void 0,{number:!0}]]),(q=t(e).errors)!=null&&q.max_token?(r(),h(g,{key:0,message:(N=t(e).errors)==null?void 0:N.max_token[0]},null,8,["message"])):n("",!0)])):n("",!0),s("div",ve,[["text","image"].includes(o.template.prompt_type)&&((T=o.template)==null?void 0:T.ai_model)!=="stability_ai"?(r(),c("div",_e,[s("label",ye,p(m.trans("Number Of Result")),1),f(t(x),{class:"multiselect-dark",modelValue:t(e).form.qty,"onUpdate:modelValue":i[4]||(i[4]=a=>t(e).form.qty=a),options:[1,2,3,4,5],placeholder:"Number Of Result"},null,8,["modelValue"]),($=t(e).errors)!=null&&$.qty?(r(),h(g,{key:0,message:(S=t(e).errors)==null?void 0:S.qty[0]},null,8,["message"])):n("",!0)])):n("",!0),o.template.prompt_type==="text"?(r(),c("div",be,[s("label",xe,p(m.trans("Creativity Level")),1),f(t(x),{class:"multiselect-dark",modelValue:t(e).form.creativity,"onUpdate:modelValue":i[5]||(i[5]=a=>t(e).form.creativity=a),options:t(e).creativityLevels,"value-by":"value",label:"label",placeholder:"Creativity Level"},null,8,["modelValue","options"]),(B=t(e).errors)!=null&&B.creativity?(r(),h(g,{key:0,message:t(e).errors.creativity[0]},null,8,["message"])):n("",!0)])):n("",!0),o.template.prompt_type==="video"?(r(),c("div",Ve,[s("label",ke,p(m.trans("Seconds")),1),_(s("input",{"onUpdate:modelValue":i[6]||(i[6]=a=>t(e).form.seconds=a),type:"number",class:"input",placeholder:"Seconds"},null,512),[[y,t(e).form.seconds,void 0,{number:!0}]]),(O=t(e).errors)!=null&&O.seconds?(r(),h(g,{key:0,message:t(e).errors.seconds[0]},null,8,["message"])):n("",!0)])):n("",!0)]),f(J,{classes:"btn btn-primary w-full py-3",processing:t(e).isProcessing,"btn-text":m.trans("Generate")},null,8,["processing","btn-text"])],32),s("div",we,[s("div",Ie,[o.template.prompt_type==="text"?(r(),c("div",Le,[s("button",{class:"me-1",onClick:i[8]||(i[8]=a=>t(u)(t(e).generatedText))},Ue),s("button",{class:"ms-1",onClick:i[9]||(i[9]=a=>t(e).downloadHTMLFile(t(e).generatedText,t(e).documentName))},Me)])):n("",!0),o.template.prompt_type==="text"?(r(),c(w,{key:1},[s("div",Pe,[_(s("input",{"onUpdate:modelValue":i[10]||(i[10]=a=>t(e).documentName=a),type:"text",class:"input",placeholder:"Untitled Document..."},null,512),[[y,t(e).documentName]])]),s("div",null,[f(X,{modelValue:t(e).generatedText,"onUpdate:modelValue":i[11]||(i[11]=a=>t(e).generatedText=a)},null,8,["modelValue"])])],64)):n("",!0),o.template.prompt_type==="image"&&t(e).generatedImages.length>0?(r(),c("div",qe,[(r(!0),c(w,null,R(t(e).generatedImages,(a,v)=>(r(),c("div",{key:v,class:"group relative h-44 overflow-hidden rounded-lg border border-primary-500 shadow shadow-primary-500"},[s("a",{class:"absolute right-1 top-0 opacity-0 group-hover:opacity-100",href:a,download:""},$e,8,Ne),s("img",{src:a,class:"h-full w-full object-cover",alt:"image"},null,8,Se)]))),128))])):n("",!0),o.template.prompt_type==="video"&&t(e).generatedVideo?(r(),c("div",Be,[s("div",Oe,[s("a",{class:"absolute right-2 top-0 z-10 opacity-0 group-hover:opacity-100",href:t(e).generatedVideo,download:""},je,8,Fe),s("video",Ae,[s("source",{src:t(e).generatedVideo,type:"video/mp4"},null,8,De)])])])):n("",!0),o.template.prompt_type==="voice_clone"&&t(e).generatedVoice||o.template.prompt_type==="audio"&&t(e).generatedVoice?(r(),c("div",Ye,[s("div",ze,[s("a",{class:"absolute right-4 z-10",href:t(e).generatedVoice,download:""},We,8,He),s("audio",Je,[s("source",{src:t(e).generatedVoice,type:"audio/wav"},null,8,Ke),s("source",{src:t(e).generatedVoice,type:"audio/mp3"},null,8,Qe),H(" Your browser does not support the audio element. ")])])])):n("",!0),((F=t(e).generatedImages)==null?void 0:F.length)<1&&!t(e).generatedVideo&&!t(e).generatedVoice&&o.template.prompt_type!=="text"?(r(),h(Q,{key:5})):n("",!0)])])])])}}});export{dt as default};
