import{s as re,m as d,T as ae,A as le,l as ne,h as ie,c as i,a as Y,j as J,u as U,b as t,F as v,r as q,d as _,v as w,Y as ue,t as k,E as de,g as ce,q as me,o as n,n as W,k as z,i as pe,e as p,a5 as fe,O as ve}from"./app-13978987.js";import{_ as ge}from"./UserLayout-6a50516d.js";import{_ as be}from"./PageHeader-8c638686.js";import{u as ye,_ as he}from"./Modal-17c50704.js";import{f as xe}from"./fabric-1ff51d4a.js";import"./dropdown-45d66330.js";const _e=t("div",{class:"flex justify-center"},[t("div",{class:"half-circle-spinner"},[t("div",{class:"circle circle-1"}),t("div",{class:"circle circle-2"})])],-1),we={class:"mt-6 text-center"},ke={class:"container flex-grow p-4 sm:p-6"},Ce={class:"m-auto max-w-6xl rounded-2xl border pb-3 shadow-lg dark:border-gray-800"},Se=de('<div class="card mb-5 flex items-center justify-between rounded-t-2xl p-4 dark:border-gray-700"><div class="flex items-center"><div class="mr-4 flex h-11 w-11 flex-shrink-0 items-center justify-center rounded-xl bg-emerald-400 bg-opacity-10 text-emerald-500"><i class="bx bx-flag text-2xl"></i></div><h5 class="mr-1">Create New Brand</h5></div></div>',1),Ie={class:"mb-20 space-y-5"},Ne={class:"flex gap-x-3 group-[.user]:flex-row-reverse"},Be={class:"avatar avatar-circle avatar-sm shrink-0"},Le=["src"],Ue=["src"],We={key:0,class:"hollow-dots-spinner"},$e=t("div",{class:"dot"},null,-1),je=t("div",{class:"dot"},null,-1),Me=t("div",{class:"dot"},null,-1),Oe=[$e,je,Me],Ae={key:0,class:"w-full space-x-2 border-t border-gray-600 pt-3"},Re={key:1,class:"w-full border-t border-gray-600 pt-3"},Te={key:0,class:"w-full space-x-2 border-t border-gray-600 pt-3"},Ve={key:1,class:"w-full border-t border-gray-600 pt-3"},Ee={class:"grid grid-cols-2 gap-x-4"},Fe=t("label",{class:"label mb-1"},"Primary Color",-1),De={class:"flex items-center gap-x-2"},Pe={class:"h-9 w-10 overflow-hidden rounded-md"},Qe=t("label",{class:"label mb-1"},"Secondary Color",-1),Ye={class:"flex items-center gap-x-2"},Je={class:"h-9 w-10 overflow-hidden rounded-md"},qe={class:"flex flex-wrap items-center gap-2"},ze=["onClick"],Ke=["disabled"],Ge={class:"flex items-center gap-2 p-4 pb-2"},He={class:"relative flex w-full items-center"},Xe=["disabled"],Ze=["disabled"],et={key:0,class:"looping-rhombuses-spinner"},tt=t("div",{class:"rhombus bg-white"},null,-1),ot=t("div",{class:"rhombus bg-white"},null,-1),st=t("div",{class:"rhombus bg-white"},null,-1),rt=[tt,ot,st],at={key:1,class:"bx bx-microphone text-lg"},lt=["disabled"],nt=t("i",{class:"bx bx-send text-lg"},null,-1),it=[nt],ut={class:"pb-2 pl-6 text-xs"},dt=ce({layout:ge}),bt=Object.assign(dt,{__name:"Create",props:["segments","buttons","categories"],setup($){const K=$,{countWordsAndChars:j}=re(),G=d(!1),g=(()=>{try{const o=window.SpeechRecognition||window.webkitSpeechRecognition;if(o){G.value=!0;const e=new o;return e.continuous=!0,e.interimResults=!0,e.lang="en-US",e}return null}catch{return console.warn("Speech recognition not supported in this browser"),null}})(),C=d(!1),R=d(!1),S=ye(),u=ae({name:"",description:"",colors:{},logo:"",categories:[]});let I=null;const M=d(null),c=d(0),T=d(200),m=d(""),a=d({hasImage:!1,hasColor:!1,primaryColor:"#ffffff",secondaryColor:"#000000",isBase64:!1}),f=d([]),h=d(!1),O=le(()=>c.value>3),H=[{order:1,text:"Welcome to the brand setup! To optimize content for your brand, we need some?"},{order:2,text:"Firstly, what's the exact name of your brand?"},{order:3,text:"Great! Now, can you provide a detailed description of your brand? Think about the main product or service you offer, who your primary customers are, and what sets you apart from others."},{order:4,text:"A visual identity starts with a logo. If you have a logo, feel free to share it, or we'll begin with a temporary placeholder logo."},{order:5,text:"Are primary and secondary colors already on your mind for your brand? If not, don't worry. We'll generate it for you."},{order:6,text:"What type of brand do you have?"},{order:7,text:"Please wait....."}],V=["Let us help you create a brand that is authentic, memorable, and true to yourself.","We're here to help you transform your vision into a reality.","Your personal brand is your most valuable asset.","Your personal brand is the foundation of your business. Build it wisely."],E=d("We're here to help you transform your vision into a reality."),N=d(0),F=()=>{M.value.scrollTop=M.value.scrollHeight},X=()=>{if(!g){me.warning("Speech recognition is not supported in your browser");return}C.value=!C.value,C.value?g.start():g.stop()},D=o=>H.find(e=>e.order===o);function B(o,e=!0,l=!1){h.value=!0,f.value.push({order:null,message:"",isBot:e,loading:!0,isError:l}),setTimeout(async()=>{const s=f.value.length-1;f.value[s].loading=!1,f.value[s].message=o,f.value[s].order=c.value,h.value=!1,F()},T.value)}function P(o){const e=D(o);setTimeout(()=>B(e.text,!0),500),c.value=o}ne(()=>{B(D(1).text,!0),setTimeout(()=>P(2),T.value),g&&(g.onresult=o=>{const e=Array.from(o.results).map(l=>l[0]).map(l=>l.transcript).join("");R.value=e},g.onspeechend=()=>{m.value+=R.value}),I=new xe.fabric.StaticCanvas});const b=(o,e=!1)=>{m.value="";const l={2:["name",1,10,"Sorry, Make it a minimum of 1 and a maximum of 10 words. What's the exact name of your brand?"],3:["description",20,100,"Sorry, Make it a minimum of 20 and a maximum of 100 words. What does your company do? Who are your customers? What are your products or services?"]};if(f.value.push({order:null,message:o,isBot:!1,loading:!1,isError:!1,isFile:e}),F(),c.value===2||c.value===3){const[s,x,r,y]=l[c.value];if(j(o).words>r||j(o).words<x){B(y,!0,!0);return}u[s]=o}P(c.value+1)},A=(o,e=!1)=>{e?u.logo="/assets/images/brand.png":u.logo=o.target.files[0],b(u.logo,!0)},Q=()=>{if(a.value.hasColor){const o={primary:a.value.primaryColor,secondary:a.value.secondaryColor};u.colors=o,b(`${a.value.primaryColor} ${a.value.secondaryColor}`)}else b("AI Will generate colors for you.")},Z=o=>{if(u.categories.includes(o)){const e=u.categories.findIndex(l=>l===o);u.categories.splice(e,1)}else u.categories.push(o)},ee=async o=>new Promise(e=>{let l=JSON.parse(o).objects;for(let r of l)if(r.id=="slogan"&&(r.text=u.name??"Name"),r.type==="i-text"&&r.left<51){let y;r.left<50&&(y=Math.abs(r.left+50)),r.left<0&&(y=Math.abs(r.left+100)),r.left+=y}let s=JSON.parse(o);s.objects=l;let x=JSON.stringify(s);I.loadFromJSON(x,function(){I.renderAll(),u.logo=I.toDataURL({width:500,height:500}),e()})}),te=async()=>{S.open("brand");let o=null;if(!(u.logo instanceof File))try{o=(await fe.get(route("api-brand-logo",{categories:u.categories}))).data.logo,o&&(await ee(o.canvas),a.value.isBase64=!0)}catch{o=null}setInterval(()=>{E.value=V[N.value],N.value++,N.value===V.length&&(N.value=0)},4e3),ve.post(route("user.brand.store"),{form:u,actions:a.value},{onSuccess:()=>S.close(),onError:e=>{const l=(e==null?void 0:e.e)||"Something went wrong..";S.close(),setTimeout(()=>B(l,!0,!0),500)}})},oe=()=>{let o="";u.categories.forEach(e=>{const l=K.categories.find(s=>s.id===e);l&&(o+=l.title+", ")}),b(o),te()},se=o=>URL.createObjectURL(o),L=(o,e)=>o.order&&o.order===e&&o.order===c.value;return(o,e)=>{const l=ie("Link");return n(),i(v,null,[Y(he,{state:U(S).states.brand,"backdrop-close":!1,"close-btn":!1,"bg-blur":!0,"bg-color":"bg-transparent"},{default:J(()=>[_e,t("p",we,k(E.value),1)]),_:1},8,["state"]),t("main",ke,[Y(be,{title:"Brand Create",buttons:$.buttons},null,8,["buttons"]),t("div",Ce,[Se,t("div",{class:"styled-scrollbar h-[calc(100vh-23rem)] overflow-y-auto p-5 pt-0",ref_key:"chatContainer",ref:M},[t("ul",Ie,[(n(!0),i(v,null,q(f.value,(s,x)=>(n(),i("li",{class:W(["group",s.isBot?"":"user"]),key:x},[t("div",Ne,[t("div",Be,[t("img",{class:"avatar-img",src:"https://ui-avatars.com/api/?name=user",alt:"profile-img"},null,8,Le)]),t("div",{class:W(["flex max-w-2xl flex-col items-start gap-y-2 rounded-primary rounded-tl-none p-3 group-[.user]:items-end group-[.user]:rounded-tl-primary group-[.user]:rounded-tr-none group-[.user]:bg-primary-500",[s.loading?"":"bg-slate-100 dark:bg-slate-700",s.isError&&!s.loading?"border border-red-500":""]])},[s.isFile&&!s.isBot?(n(),i("img",{key:0,class:"w-40",src:a.value.hasImage?se(s.message):"/assets/images/brand.png",alt:"logo"},null,8,Ue)):(n(),i(v,{key:1},[s.loading?(n(),i("div",We,Oe)):(n(),i("p",{key:1,class:W(["group-[.user]:text-slate-100",s.isError?"text-red-500":"text-slate-600 dark:text-slate-300"])},[z(k(s.message)+" ",1),L(s,7)&&s.isError?(n(),pe(l,{key:0,href:o.route("user.brand.create"),class:"btn btn-outline-danger btn-xs mt-3 block max-w-min"},{default:J(()=>[z(" Reset ")]),_:1},8,["href"])):p("",!0)],2))],64)),L(s,4)?(n(),i(v,{key:2},[a.value.hasImage?p("",!0):(n(),i("div",Ae,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=r=>a.value.hasImage=!0)}," Yes, I have "),t("button",{class:"btn btn-outline-primary",onClick:e[1]||(e[1]=()=>{a.value.hasImage=!1,A(o.e,!0)})},k(o.trans("Please generate for me")),1)])),a.value.hasImage?(n(),i("div",Re,[t("input",{class:"input",accept:"image/*",onInput:A,type:"file",name:"file"},null,32),t("button",{class:"btn btn-outline-primary mt-3",onClick:e[2]||(e[2]=()=>{a.value.hasImage=!1,A(o.e,!0)})}," No, I'll use a placeholder for now ")])):p("",!0)],64)):p("",!0),L(s,5)?(n(),i(v,{key:3},[a.value.hasColor?p("",!0):(n(),i("div",Te,[t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=r=>a.value.hasColor=!0)}," Yes, I have "),t("button",{class:"btn btn-outline-primary",onClick:e[4]||(e[4]=()=>{a.value.hasColor=!1,Q()})}," Not now, let AI generate it for me ")])),a.value.hasColor?(n(),i("div",Ve,[t("div",Ee,[t("div",null,[Fe,t("div",De,[t("div",Pe,[_(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.primaryColor=r),class:"h-24 w-24 -translate-x-5 -translate-y-4 rounded-xl bg-transparent text-sm text-slate-700 outline-none placeholder:text-slate-400 focus:ring-0 focus:ring-primary-500 dark:text-slate-200",type:"color",name:"file"},null,512),[[w,a.value.primaryColor]])]),_(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=r=>a.value.primaryColor=r),class:"input"},null,512),[[w,a.value.primaryColor]])])]),t("div",null,[Qe,t("div",Ye,[t("div",Je,[_(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>a.value.secondaryColor=r),class:"h-24 w-24 -translate-x-5 -translate-y-4 rounded-xl bg-transparent text-sm text-slate-700 outline-none placeholder:text-slate-400 focus:ring-0 focus:ring-primary-500 dark:text-slate-200",type:"color",name:"file"},null,512),[[w,a.value.secondaryColor]])]),_(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=r=>a.value.secondaryColor=r),class:"input"},null,512),[[w,a.value.secondaryColor]])])])]),t("button",{class:"btn btn-primary mt-3",onClick:Q},"Save"),t("button",{class:"btn btn-outline-dark ml-3",onClick:e[9]||(e[9]=r=>a.value.hasColor=!1)}," Cancel ")])):p("",!0)],64)):p("",!0),L(s,6)?(n(),i(v,{key:4},[t("div",qe,[(n(!0),i(v,null,q($.categories,r=>(n(),i("button",{key:r.id,class:W(["btn btn-xs",U(u).categories.includes(r.id)?"btn-primary":"btn-outline-primary"]),onClick:y=>Z(r.id)},k(r.title),11,ze))),128))]),t("button",{class:"btn btn-primary mt-3",disabled:U(u).categories<1,onClick:oe}," Save ",8,Ke)],64)):p("",!0)],2)])],2))),128))])],512),t("div",Ge,[t("div",He,[_(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>m.value=s),onKeyup:e[11]||(e[11]=ue(s=>b(m.value),["enter"])),disabled:h.value||O.value,type:"text",class:"w-full rounded-full border border-gray-200 bg-transparent px-6 py-4 text-sm text-slate-700 shadow-md outline-none placeholder:text-slate-400 focus:ring-1 focus:ring-primary-400 disabled:cursor-not-allowed dark:border-gray-700 dark:text-slate-200",placeholder:"Write Something"},null,40,Xe),[[w,m.value]]),t("button",{disabled:h.value||O.value,class:"btn btn-primary absolute right-1 h-12 w-12 rounded-full",onClick:X},[C.value?(n(),i("div",et,rt)):(n(),i("i",at))],8,Ze)]),t("button",{disabled:h.value||O.value||m.value.length<2,onClick:e[12]||(e[12]=s=>b(m.value)),class:"btn btn-dark h-12 w-12 rounded-full"},it,8,lt)]),t("p",ut," Words: "+k(U(j)(m.value??"").words),1)])])],64)}}});export{bt as default};
