import{l as j,s as E,T as y,A as M,p as o,m as A,h as w,c as r,b as t,a as l,t as s,u as e,w as v,d as p,v as f,f as g,F as x,r as I,i as O,g as P,o as d,j as q,k as B,n as T,O as Y}from"./app-13978987.js";import{_ as z}from"./AdminLayout-bd13ff9d.js";import{_ as J}from"./PageHeader-8c638686.js";import{_ as G}from"./Paginate-f61b79b2.js";import{h as H}from"./moment-a9aaa855.js";import K from"./OverviewGrid-21ea6fc2.js";import{_ as C}from"./SpinnerBtn-cb152833.js";import{d as k}from"./drawer-fe4c5e1a.js";import{_ as Q}from"./NoDataFound-bc81d7fa.js";import"./dropdown-45d66330.js";const R={class:"container p-4 sm:p-6"},W={class:"space-y-6"},X={class:"flex items-center justify-end gap-x-2"},Z={class:"dropdown","data-placement":"bottom-end"},L={class:"dropdown-toggle"},tt={type:"button",class:"btn bg-white font-medium shadow-sm dark:bg-slate-800"},et={class:"dropdown-content w-72 !overflow-visible"},st={class:"dropdown-list space-y-4 p-4"},ot={class:"dropdown-list-item"},nt={class:"my-1 text-sm font-medium"},at={class:"mb-2"},lt={class:"dropdown-list-item"},it={class:"mb-2"},dt={value:"email"},rt={value:"invoice_no"},ct={class:"dropdown-list-item"},_t={type:"submit",class:"btn btn-primary w-full"},ut={class:"table-responsive whitespace-nowrap rounded-primary"},pt={class:"table"},mt={class:"flex justify-end"},ht={key:0},bt={class:"text-primary-500"},vt={key:0},ft={key:1},yt=["href"],wt={key:1},gt={class:"text-left"},xt={class:"flex justify-end"},Ct={class:"dropdown","data-placement":"bottom-start"},kt={class:"dropdown-toggle"},St={class:"dropdown-content w-40"},Dt={class:"dropdown-list"},Ft={class:"dropdown-list-item"},Nt=["onClick"],Vt={id:"updateCreditFeeDrawer",class:"drawer drawer-right"},Ut={class:"drawer-header"},$t={type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},jt={class:"drawer-body"},Et={class:"mb-2"},Mt={class:"label mb-2"},At={class:"drawer-footer"},It={class:"flex justify-end gap-2"},Ot={type:"button",class:"btn btn-secondary","data-dismiss":"drawer"},Pt={id:"editCreditDrawer",class:"drawer drawer-right"},qt={class:"drawer-header"},Bt={type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},Tt={class:"drawer-body"},Yt={class:"mb-2"},zt={class:"label mb-2"},Jt={value:"1"},Gt={value:"0"},Ht={class:"mb-2"},Kt={class:"label mb-2"},Qt={class:"mb-2"},Rt={class:"label mb-2"},Wt=["value"],Xt={class:"drawer-footer"},Zt={class:"flex justify-end gap-2"},Lt={type:"button",class:"btn btn-secondary","data-dismiss":"drawer"},te=P({layout:z}),ue=Object.assign(te,{__name:"Index",props:["creditLogs","per_credit_fee","totalCreditLog","activeCreditLog","inactiveCreditLog","request","type"],setup(m){j(()=>{k.init()});const{formatCurrency:S,textExcerpt:D}=E(),c=m,u=y({search:c.request.search,type:c.type}),F=M(()=>[{value:c.totalCreditLog,title:o("Total Credit Log"),iconClass:"bx:badge"},{value:c.activeCreditLog,title:o("Active Credit Log"),iconClass:"bx:badge-check"},{value:c.inactiveCreditLog,title:o("Pending Credit Log"),iconClass:"bx:x-circle"}]),h=y({per_credit_fee:c.per_credit_fee}),N=()=>{h.put(route("admin.update-credit-fee"))},i=A({}),V=b=>{i.value={...b},k.of("#editCreditDrawer").show()},U=()=>{Y.patch(route("admin.credit-logs.update",i.value.id),i.value)};return(b,a)=>{const _=w("Icon"),$=w("Link");return d(),r(x,null,[t("main",R,[l(J),t("div",W,[l(K,{items:F.value,grid:"3"},null,8,["items"]),t("div",X,[t("div",Z,[t("div",L,[t("button",tt,[l(_,{icon:"fe:filter"}),t("span",null,s(e(o)("Filter")),1),l(_,{icon:"bx:chevron-down"})])]),t("div",et,[t("form",{onSubmit:a[2]||(a[2]=v(n=>e(u).get("/admin/credit-logs"),["prevent"]))},[t("ul",st,[t("li",ot,[t("h2",nt,s(e(o)("Status")),1),t("div",at,[p(t("input",{type:"text",name:"search","onUpdate:modelValue":a[0]||(a[0]=n=>e(u).search=n),class:"input",placeholder:"Search......"},null,512),[[f,e(u).search]])])]),t("li",lt,[t("div",it,[p(t("select",{class:"select",name:"type","onUpdate:modelValue":a[1]||(a[1]=n=>e(u).type=n)},[t("option",dt,s(e(o)("User Email")),1),t("option",rt,s(e(o)("Invoice No")),1)],512),[[g,e(u).type]])])]),t("li",ct,[t("button",_t,s(e(o)("Filter")),1)])])],32)])])]),t("div",ut,[t("table",pt,[t("thead",null,[t("tr",null,[t("th",null,s(e(o)("Invoice")),1),t("th",null,s(e(o)("User Name")),1),t("th",null,s(e(o)("Credits")),1),t("th",null,s(e(o)("Price")),1),t("th",null,s(e(o)("Status")),1),t("th",null,s(e(o)("Gateway")),1),t("th",null,s(e(o)("Comment")),1),t("th",null,s(e(o)("Attachment")),1),t("th",null,s(e(o)("Date")),1),t("th",mt,s(e(o)("Action")),1)])]),m.creditLogs.total>0?(d(),r("tbody",ht,[(d(!0),r(x,null,I(m.creditLogs.data,n=>(d(),r("tr",{key:n.id},[t("td",null,[t("p",bt,s(n.invoice_no),1)]),t("td",null,[l($,{href:b.route("admin.users.show",n.user_id)},{default:q(()=>[B(s(e(D)(n.user.name,30)),1)]),_:2},1032,["href"])]),t("td",null,s(n.credits),1),t("td",null,s(e(S)(n.price)),1),t("td",null,[t("span",{class:T(n.status==1?"badge badge-success":"badge badge-warning")},s(n.status==1?"Complete":"Pending"),3)]),t("td",null,s(n.gateway.name),1),t("td",null,[n!=null&&n.meta?(d(),r("span",vt,s(JSON.parse(n.meta).comment),1)):(d(),r("span",ft,s(e(o)("None")),1))]),t("td",null,[n!=null&&n.meta?(d(),r("a",{key:0,href:b.sanitizeHtml(JSON.parse(n.meta).screenshot),target:"_blank"},s(e(o)("View Attachment")),9,yt)):(d(),r("span",wt,s(e(o)("None")),1))]),t("td",gt,s(e(H)(n.updated_at).format("DD MMM, YYYY")),1),t("td",null,[t("div",xt,[t("div",Ct,[t("div",kt,[l(_,{class:"text-2xl",icon:"bx:dots-horizontal-rounded"})]),t("div",St,[t("ul",Dt,[t("li",Ft,[t("button",{onClick:ee=>V(n),class:"dropdown-link"},[l(_,{icon:"fe:edit"}),t("span",null,s(e(o)("Edit")),1)],8,Nt)])])])])])])]))),128))])):(d(),O(Q,{key:1,"for-table":"true"}))])]),l(G,{links:m.creditLogs.links},null,8,["links"])])]),t("div",Vt,[t("form",{onSubmit:v(N,["prevent"])},[t("div",Ut,[t("h5",null,s(e(o)("Edit Credit Fee")),1),t("button",$t,[l(_,{class:"text-xl",icon:"mdi:close"})])]),t("div",jt,[t("div",Et,[t("label",Mt,s(e(o)("Per Credit Fee")),1),p(t("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>e(h).per_credit_fee=n),type:"number",step:"any",required:"",class:"input"},null,512),[[f,e(h).per_credit_fee]])])]),t("div",At,[t("div",It,[t("button",Ot,[t("span",null,s(e(o)("Close")),1)]),l(C,{classes:"btn btn-primary",processing:e(h).processing,"btn-text":e(o)("Save Changes")},null,8,["processing","btn-text"])])])],32)]),t("div",Pt,[t("form",{onSubmit:v(U,["prevent"])},[t("div",qt,[t("h5",null,s(e(o)("Edit Order")),1),t("button",Bt,[l(_,{class:"text-xl",icon:"mdi:close"})])]),t("div",Tt,[t("div",Yt,[t("label",zt,s(e(o)("Status")),1),p(t("select",{"onUpdate:modelValue":a[4]||(a[4]=n=>i.value.status=n),class:"select",name:"status"},[t("option",Jt,s(e(o)("Approved")),1),t("option",Gt,s(e(o)("Pending")),1)],512),[[g,i.value.status]])]),t("div",Ht,[t("label",Kt,s(e(o)("Credits")),1),p(t("input",{"onUpdate:modelValue":a[5]||(a[5]=n=>i.value.credits=n),type:"number",maxlength:"500",class:"input",required:""},null,512),[[f,i.value.credits]])]),t("div",Qt,[t("label",Rt,s(e(o)("Payment ID")),1),t("input",{value:i.value.payment_id,type:"text",class:"input read-only:cursor-not-allowed",readonly:""},null,8,Wt)])]),t("div",Xt,[t("div",Zt,[t("button",Lt,[t("span",null,s(e(o)("Close")),1)]),l(C,{classes:"btn btn-primary",processing:i.value.processing,"btn-text":e(o)("Save Changes")},null,8,["processing","btn-text"])])])],32)])],64)}}});export{ue as default};
