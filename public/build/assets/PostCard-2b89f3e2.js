import{P as I,s as j,B as N,m as v,T as P,l as Y,o as a,i as S,j as L,d as k,f as A,u as i,b as e,c as r,r as V,t as g,F as w,v as D,a as R,e as x,q as $,h as E,x as F,n as U}from"./app-13978987.js";import{u as O,_ as W}from"./Modal-17c50704.js";import{_ as q}from"./HollowDotsSpinner-aede4138.js";import{_ as B}from"./InputFieldError-52549d23.js";import{h as G}from"./moment-a9aaa855.js";const C=I({status:"",message:"",checkPlan(t,_){var p,d;const{authUser:c}=j();if(!c.value.plan_data||!c.value.will_expire){this.status="danger",this.message="You have not purchased a plan.";return}if(new Date(c.value.will_expire)<new Date){this.status="danger",this.message="Your plan has expired. Please renew your plan!";return}const m=(d=(p=c.value)==null?void 0:p.plan_data[t])==null?void 0:d.value;if(m===-1){this.status="success";return}typeof m=="boolean"&&(m?this.status="success":(this.status="danger",this.message="The feature is not available in your plan. Please upgrade your plan.")),m!==-1&&_>=m?(this.status="danger",this.message=`You have reached your ${t} limit. Please upgrade your plan.`):this.status="success"}}),H=e("option",{value:"",selected:"",disabled:""},"Select Brand",-1),J=["value"],Q={class:"my-4 rounded border border-gray-600 p-3"},X={key:0,class:"group relative h-20 max-w-max"},Z=["src"],K=e("i",{class:"bx bx-x text-xl"},null,-1),ee=[K],te={class:"flex items-center justify-between"},se={class:"space-y-3"},ne={key:0,class:"looping-rhombuses-spinner ml-1 mr-3 scale-75"},ae=e("div",{class:"rhombus bg-primary-600"},null,-1),oe=e("div",{class:"rhombus bg-primary-600"},null,-1),ie=e("div",{class:"rhombus bg-primary-600"},null,-1),re=[ae,oe,ie],le={key:1,class:"bx bx-microphone"},ce=e("span",null,"Voice Typing",-1),de=e("i",{class:"bx bx-upload"},null,-1),ue=e("span",null,"Upload Image",-1),me=[de,ue],pe=["disabled"],be=e("i",{class:"bx bx-paper-plane"},null,-1),he=e("span",null,"Generate Post",-1),Ne={__name:"ContentCreateModal",props:["totalBrandPost","brands","brand_uuid"],emits:["action"],setup(t,{emit:_}){const c=t,f=O(),{countWordsAndChars:m}=j(),{getState:p}=N(f),d=v(!1),l=v(!1),h=v(null),y=v(!1),s=P({brand_id:"",title:"",input:"",image:""}),b=(()=>{try{const u=window.SpeechRecognition||window.webkitSpeechRecognition;if(u){y.value=!0;const n=new u;return n.continuous=!0,n.interimResults=!0,n.lang="en-US",n}return null}catch{return console.warn("Speech recognition not supported in this browser"),null}})();Y(()=>{b&&(b.onresult=u=>{const n=Array.from(u.results).map(o=>o[0]).map(o=>o.transcript).join("");l.value=n},b.onspeechend=()=>{s.input+=l.value}),c.brand_uuid&&(s.brand_id=c.brands.find(u=>u.uuid==c.brand_uuid).id)});const M=()=>{if(!b){$.warning("Speech recognition is not supported in your browser");return}d.value=!d.value,d.value?b.start():b.stop()},T=u=>URL.createObjectURL(u),z=()=>{if(C.checkPlan("posts",c.totalBrandPost),C.status==="danger")return $.danger(C.message);if(s.input&&m(s.input).words>200){$.danger("Maximum words allowed is 200");return}s.post(route("user.brand-posts.store"),{preserveState:!0,onSuccess:()=>f.close()})};return(u,n)=>(a(),S(W,{state:i(p)("createContent"),"header-state":!0,"header-title":"Description"},{default:L(()=>[k(e("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>i(s).brand_id=o),class:"select mt-3"},[H,(a(!0),r(w,null,V(t.brands,o=>(a(),r("option",{value:o.id,key:o.id},g(o.name),9,J))),128))],512),[[A,i(s).brand_id]]),k(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=o=>i(s).title=o),class:"input mt-3",placeholder:"Title"},null,512),[[D,i(s).title]]),R(B,{message:i(s).errors.title},null,8,["message"]),e("div",Q,[k(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=o=>i(s).input=o),class:"textarea styled-scrollbar max-h-48 min-h-[12rem] resize-none border-none p-0 focus:ring-0",placeholder:"Write something"},null,512),[[D,i(s).input]]),R(B,{message:i(s).errors.input},null,8,["message"]),i(s).image?(a(),r("div",X,[e("img",{class:"h-full rounded-md",src:T(i(s).image),alt:"logo"},null,8,Z),e("button",{onClick:n[3]||(n[3]=o=>i(s).image=null),class:"btn btn-dark btn-xs invisible absolute -right-2 -top-2 h-5 w-5 rounded-full group-hover:visible"},ee)])):x("",!0)]),e("div",te,[e("div",se,[e("button",{type:"button",class:"btn btn-outline-primary mr-3",onClick:M},[d.value?(a(),r("div",ne,re)):(a(),r("i",le)),ce]),e("input",{ref_key:"fileInput",ref:h,onInput:n[4]||(n[4]=o=>i(s).image=o.target.files[0]),accept:"image/*",type:"file",hidden:""},null,544),e("button",{type:"button",onClick:n[5]||(n[5]=o=>h.value.click()),class:"btn btn-dark"},me)]),e("button",{onClick:z,disabled:i(s).processing,type:"button",class:"btn btn-primary whitespace-nowrap"},[i(s).processing?(a(),S(q,{key:0,class:"flex items-center justify-center",dotClass:"dot-white"})):(a(),r(w,{key:1},[be,he],64))],8,pe)])]),_:1},8,["state"]))}},ge={class:"flex h-[17rem] w-full items-center justify-center overflow-hidden rounded"},xe={key:0,class:"h-full w-full object-cover",alt:"media"},_e={key:1,class:"bx bx-image text-9xl text-secondary-700"},fe={key:2,class:"bx bx-video text-9xl text-secondary-700"},ye={key:3,class:"bx bx-file text-9xl text-secondary-700"},ve={class:"border-y border-gray-200 px-4 py-2 dark:border-gray-700"},ke={class:"-mb-2 flex items-center justify-between"},we={class:"mb-0.5 font-semibold"},$e={class:"text-xs text-gray-500"},Ce={class:"text-gray-400"},Se={class:"flex items-center justify-between px-4 pt-3"},je={class:"flex h-full items-center gap-1"},De=["src","title"],Re={key:0,class:"bx bx-file-blank mr-px text-base"},Ue={key:1,class:"bx bx-check-circle mr-px text-base"},Be={key:2,class:"bx bx-calendar mr-px text-base"},Le={class:"text-xs font-bold capitalize"},Pe={__name:"PostCard",props:{content:{type:Object,default:{}}},setup(t){const{textExcerpt:_}=j();return(c,f)=>{const m=E("Link"),p=F("lazy");return a(),S(m,{href:c.route("user.publish",t.content.uuid),class:"flex h-96 min-w-[18rem] flex-col rounded-2xl border border-gray-50 shadow-md dark:border-gray-600 dark:bg-[#0f172a7e]"},{default:L(()=>{var d;return[e("div",ge,[t.content.media.type==="image"&&t.content.media.url?k((a(),r("img",xe,null,512)),[[p,t.content.media.url]]):t.content.media.type==="image"&&t.content.media.url===null?(a(),r("i",_e)):t.content.media.type==="video"?(a(),r("i",fe)):(a(),r("i",ye))]),e("div",ve,[e("div",ke,[e("p",we,g(i(_)(t.content.title,24)),1),e("p",$e,g(t.content.created_at_diff),1)]),e("small",Ce,g((d=t.content.brand)==null?void 0:d.name),1)]),e("div",Se,[e("div",je,[(a(!0),r(w,null,V(t.content.platforms??[],l=>{var h,y,s;return a(),r(w,{key:l.platform},[["published","failed"].includes(l.status)?(a(),r("img",{key:0,class:U(["w-6 rounded-md border p-1",{"border-red-600 bg-red-50 ":l.published_at==null,"border-green-600 bg-green-50":l.published_at!=null}]),src:`/assets/svg/${l.platform}.svg`,title:l.published_at?"published "+i(G)(l.published_at).fromNow():((y=(h=l.data)==null?void 0:h.message)==null?void 0:y.message)??((s=l.data)==null?void 0:s.message)},null,10,De)):x("",!0)],64)}),128))]),e("div",{class:U(["badge scale-90 border dark:bg-secondary-800",{"border-gray-300 bg-red-50  text-gray-600 ":t.content.status=="draft","border-orange-300 bg-orange-50  text-orange-600":t.content.status=="scheduled","border-green-300 bg-green-50  text-green-600":t.content.status=="published"}])},[t.content.status=="draft"?(a(),r("i",Re)):x("",!0),t.content.status=="published"?(a(),r("i",Ue)):x("",!0),t.content.status=="scheduled"?(a(),r("i",Be)):x("",!0),e("span",Le,g(t.content.status),1)],2)])]}),_:1},8,["href"])}}};export{Ne as _,Pe as a};
